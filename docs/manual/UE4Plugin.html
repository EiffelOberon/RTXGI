

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Unreal Engine 4 Plugin &mdash; RTXGI SDK 1.1  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/nvidia_theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Dynamic Diffuse Global Illumination" href="DDGI.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> RTXGI SDK 1.1
          

          
            
            <img src="../_static/nvidia_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Index.html">User’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Welcome.html">Welcome</a></li>
<li class="toctree-l2"><a class="reference internal" href="License.html">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="QuickStart.html">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="Changelog.html">Change Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="Harness.html">Test Harness</a></li>
<li class="toctree-l2"><a class="reference internal" href="SDKOverview.html">RTXGI SDK Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="DDGI.html">Dynamic Diffuse Global Illumination</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Unreal Engine 4 Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#getting-started-in-nvrtx">Getting Started in NvRTX</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-started-in-vanilla-ue4">Getting Started in Vanilla UE4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#clone-unreal-engine-4">Clone Unreal Engine 4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#clone-the-rtxgi-plugin-patch">Clone the RTXGI Plugin Patch</a></li>
<li class="toctree-l4"><a class="reference internal" href="#apply-the-pugin-patch">Apply the Pugin Patch</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enable-directx-12-ray-tracing-and-the-rtxgi-plugin">Enable DirectX 12, Ray Tracing, and the RTXGI Plugin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#functionality">Functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="#artist-overview">Artist Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rtxgi-volume-placement-in-ue4">RTXGI Volume Placement in UE4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-rtxgi-in-ue4">Using RTXGI in UE4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tips-and-tricks">Tips and Tricks</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RTXGI SDK 1.1</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Index.html">User’s Guide</a> &raquo;</li>
        
      <li>Unreal Engine 4 Plugin</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="unreal-engine-4-plugin">
<span id="ue4plugin"></span><h1>Unreal Engine 4 Plugin<a class="headerlink" href="#unreal-engine-4-plugin" title="Permalink to this headline">¶</a></h1>
<p>To bring the advantages of RTXGI to as many developers as possible, all RTXGI 1.1 features are now available in Unreal Engine 4 through the RTXGI UE4 plugin.</p>
<p>To use the RTXGI UE4 plugin, you’ll first need to meet the following software and hardware requirements:</p>
<b>Software:</b> <br><ul class="simple">
<li><p>Windows 10 v1809 or higher.</p></li>
<li><p>Visual Studio 2017 or 2019.</p></li>
<li><p>Windows SDK version 10.0.17763 or higher (can be installed using the Visual Studio Installer).</p></li>
<li><p>The latest drivers for your GPU. NVIDIA drivers <a class="reference external" href="http://www.nvidia.com/drivers">are available here</a>.</p></li>
<li><p>Unreal Engine version 4.26.1 (preferred), 4.26.0, 4.25.4, or 4.25.3 source code, available for free from <a class="reference external" href="https://www.unrealengine.com/en-US/ue4-on-github">Epic Games</a> or from the <a class="reference external" href="https://github.com/NvRTX/UnrealEngine/tree/rtx-dlss-4.26">NVIDIA RTX branch</a> of Unreal Engine.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>RTXGI v1.1.30 (and later) is not available in UE4.25</strong>. Use RTXGI v1.1.23 with UE4.25.</p>
</div>
<b>Hardware:</b> <br><ul>
<li><p>Any DXR enabled GPU. NVIDIA DXR enabled GPUs:</p>
<blockquote>
<div><ul class="simple">
<li><p>RTX 3090, 3080, 3070, 3060 Ti, 3060</p></li>
<li><p>RTX 2080 Ti, 2080 SUPER, 2080, 2070 SUPER, 2070, 2060 SUPER, 2060</p></li>
<li><p>GTX 1660 Ti, 1660 SUPER, 1660</p></li>
<li><p>GTX 1080 Ti, 1080, 1070, 1060 with at least 6GB of memory</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Problems, Feedback, and Bugs</strong> <br/> If you encounter any problems, have feedback, or would like to report a bug, please contact: <a class="reference external" href="mailto:rtxgi-support-service&#37;&#52;&#48;nvidia&#46;com">rtxgi-support-service<span>&#64;</span>nvidia<span>&#46;</span>com</a></p>
</div>
<div class="section" id="getting-started-in-nvrtx">
<h2>Getting Started in NvRTX<a class="headerlink" href="#getting-started-in-nvrtx" title="Permalink to this headline">¶</a></h2>
<p>The fastest and easiest way to get started with RTXGI in UE4 is to download the latest version of the <a class="reference external" href="https://developer.nvidia.com/unrealengine">NVIDIA RTX branch of UE4</a> (also known as NvRTX).</p>
<p><strong>The latest RTXGI plugin comes pre-installed in NvRTX 4.26.1 (goodbye patches!)</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Access to NvRTX is available to everyone!</strong> To use NvRTX, you’ll need a GitHub account and an Epic Games account that are linked. Instructions to do this are available at <a class="reference external" href="https://www.unrealengine.com/en-US/ue4-on-github">https://www.unrealengine.com/en-US/ue4-on-github</a>. Once that process is complete, you will be able to access the NvRTX GitHub repository at <a class="reference external" href="https://github.com/NvRTX/UnrealEngine">https://github.com/NvRTX/UnrealEngine</a>.</p>
</div>
<p>After downloading, compiling, and running NvRTX UE4 <strong>set your project’s default RHI to DirectX 12 and enable Ray Tracing</strong> in the project settings. At this time, ray tracing requires DirectX 12 in Unreal Engine 4.</p>
<ul class="simple">
<li><p>Go to <em>Project Settings-&gt;Platforms-&gt;Windows-&gt;Targeted RHIs-&gt;Default RHI</em> and select DirectX 12.</p>
<ul>
<li><p>Make sure the DirectX 11 &amp; 12 (SM5) check box is also selected.</p></li>
</ul>
</li>
<li><p>Go to <em>Project Settings-&gt;Engine-&gt;Rendering-&gt;Ray Tracing</em> and check the box next to Ray Tracing.</p></li>
<li><p>(Optional) Enable <em>Force No Precomputed Lighting</em> to avoid doubling lighting contributions (i.e. mixing RTXGI and precomputed indirect lighting).</p>
<ul>
<li><p>To disable precomputed lighting in the current level, select <em>World Settings-&gt;Lightmass-&gt;Force No Precomputed Lighting</em>.</p></li>
<li><p>To disable precomputed lighting globally, disable <em>Project Settings-&gt;Engine-&gt;Rendering-&gt;Lighting-&gt;Allow Static Lighting</em>.</p></li>
</ul>
</li>
</ul>
<p>Next, navigate to the plugins area and <strong>enable the RTX Global Illumination (RTXGI) plugin</strong>.</p>
<ul>
<li><p>In the editor, go to <em>Settings-&gt;Plugins</em>.</p></li>
<li><p>In the plugins dialog, go to <em>Built-In-&gt;Rendering</em>.</p></li>
<li><p><em>Enable</em> the NVIDIA RTX Global Illumination plugin.</p>
<p><img alt="plugins-dialog" src="../_images/plugins.png" /></p>
</li>
<li><p>Restart the UE4 editor.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">r.GlobalIllumination.ExperimentalPlugin</span></code> cvar to <code class="docutils literal notranslate"><span class="pre">1</span></code> to enable global illumination plugins (set in <code class="docutils literal notranslate"><span class="pre">.ini</span></code> files, on the console, or in blueprints).</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">r.RTXGI.DDGI</span></code> cvar to <code class="docutils literal notranslate"><span class="pre">1</span></code> to enable RTXGI (set in <code class="docutils literal notranslate"><span class="pre">.ini</span></code> files, on the console, or in blueprints).</p></li>
<li><p>Place DDGIVolume actors in the scene and to use RTX Global Illumination within the volume.</p></li>
<li><p>That’s it.  Go make something great with RTXGI! Learn more about RTXGI <a class="reference internal" href="#id1">Functionality</a> and usage in the <a class="reference internal" href="#id2">Artist Overview</a>.</p>
<p><img alt="ddgi-volume" src="../_images/editor-ddgi-volume.png" /></p>
</li>
</ul>
</div>
<div class="section" id="getting-started-in-vanilla-ue4">
<h2>Getting Started in Vanilla UE4<a class="headerlink" href="#getting-started-in-vanilla-ue4" title="Permalink to this headline">¶</a></h2>
<p>If you prefer to use mainline (also known as “vanilla”) UE4, the setup process requires a few more steps compared to NvRTX. You will need to apply a patch file to the engine source code to install the RTXGI plugin. Patch files are required since engine-side changes are necessary for the RTXGI plugin to work with Unreal Engine. <strong>If you are not familiar with this process, we strongly recommend using NvRTX instead</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using NvRTX, skip this section.</p>
</div>
<div class="section" id="clone-unreal-engine-4">
<h3>Clone Unreal Engine 4<a class="headerlink" href="#clone-unreal-engine-4" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Clone Unreal Engine 4.26.1 from the Epic Games <a class="reference external" href="https://www.unrealengine.com/en-US/ue4-on-github">Unreal Engine GitHub</a>.</p>
<ul class="simple">
<li><p><strong>Make sure Git is configured to checkout the Unreal Engine source code with “Windows-style” line endings.</strong></p></li>
<li><p>This is <strong>very important</strong> since patch application will fail if the engine code and the plugin patch file line ending types do not match.</p></li>
<li><p>Below is an example of how this is done in the <a class="reference external" href="http://gitextensions.github.io/">GitExtensions</a> tool.</p></li>
</ul>
<p><img alt="repo-line-endings" src="../_images/repo-config-line-endings.png" /></p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>RTXGI v1.1.30 (and later) is not available in UE4.25</strong>. Use RTXGI v1.1.23 with UE4.25.</p>
</div>
</div>
<div class="section" id="clone-the-rtxgi-plugin-patch">
<h3>Clone the RTXGI Plugin Patch<a class="headerlink" href="#clone-the-rtxgi-plugin-patch" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Clone or download the <strong>RTXGI-4.26.1.patch</strong> file from the <strong>ue4-plugin</strong> directory of the RTXGI GitHub repository.</p>
<ul class="simple">
<li><p>Alternatively, select the patch that matches the engine version you are using.</p></li>
</ul>
</li>
<li><p><strong>Make sure the patch file also has windows style line endings.</strong></p></li>
<li><p>Copy the patch file to the root directory of the cloned Unreal Engine source code.</p>
<p><img alt="ue4-root-patch" src="../_images/ue4-root-patch.png" /></p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Patch files are available in the RTXGI SDK Github repository under the <strong>ue4-plugin</strong> directory.</p>
</div>
</div>
<div class="section" id="apply-the-pugin-patch">
<h3>Apply the Pugin Patch<a class="headerlink" href="#apply-the-pugin-patch" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Open a Git bash command prompt in the root directory of the cloned Unreal Engine source code.</p></li>
<li><p>Type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">apply</span> <span class="pre">--check</span> <span class="pre">RTXGI-UE4.xx.y.patch</span></code> and hit enter.</p>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">xx</span></code> with the major engine version number (e.g. <code class="docutils literal notranslate"><span class="pre">26</span></code>), and <code class="docutils literal notranslate"><span class="pre">y</span></code> with the minor engine version number (e.g. <code class="docutils literal notranslate"><span class="pre">1</span></code>).</p></li>
<li><p>This checks if the chosen patch can be applied to the repository.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">apply</span> <span class="pre">--check</span> <span class="pre">...</span></code> returns errors, follow the prompt and resolve conflicts manually.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">apply</span> <span class="pre">--check</span> <span class="pre">...</span></code> returns nothing (or only warnings) continue to the next step.</p></li>
</ul>
</li>
<li><p>In the same command prompt, type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">apply</span> <span class="pre">RTXGI-UE4.xx.y.patch</span></code> and hit enter.</p>
<ul class="simple">
<li><p>Again, replace <code class="docutils literal notranslate"><span class="pre">xx</span></code> with the major engine version number and <code class="docutils literal notranslate"><span class="pre">y</span></code> with the minor engine version number.</p></li>
</ul>
</li>
<li><p>The patch is now applied and the RTXGI plugin is installed. The engine must be (re)built.</p>
<blockquote>
<div><ul class="simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">GenerateProjectFiles.bat</span></code> to regenerate the project files.</p></li>
<li><p>Open <code class="docutils literal notranslate"><span class="pre">UE4.sln</span></code> and build the engine.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="enable-directx-12-ray-tracing-and-the-rtxgi-plugin">
<h3>Enable DirectX 12, Ray Tracing, and the RTXGI Plugin<a class="headerlink" href="#enable-directx-12-ray-tracing-and-the-rtxgi-plugin" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Go to <em>Project Settings-&gt;Platforms-&gt;Windows-&gt;Targeted RHIs-&gt;Default RHI</em> and select DirectX 12.</p>
<ul>
<li><p>Make sure the DirectX 11 &amp; 12 (SM5) check box is also selected.</p></li>
</ul>
</li>
<li><p>Go to <em>Project Settings-&gt;Engine-&gt;Rendering-&gt;Ray Tracing</em> and check the box next to Ray Tracing.</p></li>
<li><p>(Optional) Enable <em>Force No Precomputed Lighting</em> to avoid doubling lighting contributions (i.e. mixing RTXGI and precomputed indirect lighting).</p>
<ul>
<li><p>To disable precomputed lighting in the current level, select <em>World Settings-&gt;Lightmass-&gt;Force No Precomputed Lighting</em>.</p></li>
<li><p>To disable precomputed lighting globally, disable <em>Project Settings-&gt;Engine-&gt;Rendering-&gt;Lighting-&gt;Allow Static Lighting</em>.</p></li>
</ul>
</li>
</ul>
<p>Next, navigate to the plugins area and <strong>enable the RTX Global Illumination (RTXGI) plugin</strong>.</p>
<ul>
<li><p>In the editor, go to <em>Settings-&gt;Plugins</em>.</p></li>
<li><p>In the plugins dialog, go to <em>Built-In-&gt;Rendering</em>.</p></li>
<li><p><em>Enable</em> the NVIDIA RTX Global Illumination plugin.</p>
<p><img alt="plugins-dialog" src="../_images/plugins.png" /></p>
</li>
<li><p>Restart the UE4 editor.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">r.GlobalIllumination.ExperimentalPlugin</span></code> cvar to <code class="docutils literal notranslate"><span class="pre">1</span></code> to enable global illumination plugins (set in <code class="docutils literal notranslate"><span class="pre">.ini</span></code> files, on the console, or in blueprints).</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">r.RTXGI.DDGI</span></code> cvar to <code class="docutils literal notranslate"><span class="pre">1</span></code> to enable RTXGI (set in <code class="docutils literal notranslate"><span class="pre">.ini</span></code> files, on the console, or in blueprints).</p></li>
<li><p>Place DDGIVolume actors in the scene and to use RTX Global Illumination within the volume.</p></li>
<li><p>That’s it.  Go make something great with RTXGI! Learn more about RTXGI <a class="reference internal" href="#id1">Functionality</a> and usage in the <a class="reference internal" href="#id2">Artist Overview</a>.</p>
<p><img alt="ddgi-volume" src="../_images/editor-ddgi-volume.png" /></p>
</li>
</ul>
</div>
</div>
<div class="section" id="functionality">
<h2>Functionality<a class="headerlink" href="#functionality" title="Permalink to this headline">¶</a></h2>
<p id="id1">RTXGI implements the <em>Dynamic Diffuse Global Illumination (DDGI)</em> algorithm to compute diffuse global illumination. DDGI uses ray tracing to gather irradiance and distance data on a regular grid of probes. This is similar to existing irradiance probe solutions you may already be familiar with, but irradiance and distance calculations now occur in real time. RTXGI probes temporally accumulate data and use a statistics-based method to resolve visibility and prevent light leaking.</p>
<p><strong>To use RTXGI in UE4, place DDGIVolume actors in the scene</strong>. These volumes contain a grid of probes that RTXGI updates with ray tracing. One <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> is updated per frame in a weighted round robin fashion using the volume’s <strong>Update Priority</strong> property.</p>
<p>Various properties of a <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> can be adjusted and these properties are discussed in the <a class="reference internal" href="#id2">Artist Overview</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Probes temporally accumulate bounce lighting after a <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> is placed in the world.</p>
</div>
<p>Several new console variables (“cvars”) are available to with RTXGI. These are described in the table below.</p>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">RTXGI Console Variables</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 11%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Options</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r.RTXGI.DDGI</span></code></p></td>
<td><p>0, 1</p></td>
<td><p>Toggles RTXGI on or off.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r.RTXGI.DDGIShowProbes</span></code></p></td>
<td><p>0, 1</p></td>
<td><p>Toggles a visualization of RTXGI volumes and probes on or off.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r.RTXGI.DDGIProbeVis</span></code></p></td>
<td><p>0, 1, 2</p></td>
<td><p>Toggles probe visualization. This allows the user to see what the probes see from the camera’s point of view. In mode 2, it shows ray misses in blue, ray hits in green and ray back face hits in red.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r.RTXGI.MemoryUsed</span></code></p></td>
<td><p>None</p></td>
<td><p>Shows the summary and details of video memory being used by RTXGI in the output log.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Vis</span> <span class="pre">DDGIProbeVis</span></code></p></td>
<td><p>None</p></td>
<td><p>Allows the user to see the texture from the <code class="docutils literal notranslate"><span class="pre">r.RTXGI.DDGIProbeVis</span></code> command. This helps diagnose inaccuracies in the probes due to lighting or geometry not being configured to be visible to ray tracing.</p></td>
</tr>
</tbody>
</table>
<p><strong>Project Settings:</strong> <br/>
The RTXGI plugin has several settings in UE4’s project settings dialog.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Irradiance Bits</strong> - by default, a 10-bit per color channel texture format is used to store probe irradiance. With extended radiance or very bright light sources, 10-bits may not be enough to properly represent the light’s energy. The Irradiance texture’s bit depth can be increased to 32-bits (using a RGBA32F texture format) to support extended radiance at the cost of increased memory use. Alteratively, use 10-bit irradiance and adjust the <strong>Irradiance Scalar</strong> option of a <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> to reduce lighting magnitudes before storage and scale them back up after reading. This saves memory at the cost of some precision.</p></li>
<li><p><strong>Distance Bits</strong> - by default, 16-bit floating point format is used to store distance (and distance squared) in a probe for use when determiniming occlusion. When distances are large, 16-bits may not be sufficient. The distance texture’s bit depth can be increased to 32-bits for improved precision.</p></li>
<li><p><strong>Debug Probe Radius</strong> - sets the radius of spheres, in world-space units, that are rendered when visualizing <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> probes.</p></li>
<li><p><strong>Probe Update Ray Budget</strong> - sets the maximum number of rays that may be cast when updating probes. 0 specifies an unlimited number of rays. An 8x8x8 volume using 288 rays per probe would specify 147,456 to fully update all probes each frame. One volume is updated each frame based on the volume’s priority. A higher volume priority means the volume is updated more often. These settings make it possibe to place a ceiling on performance costs, while also controlling the proportion of ray updates (or amount of light lag) a volume recieves.</p></li>
</ul>
</div></blockquote>
<p><strong>Limitations:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>RTXGI lighting does not work with UE4’s forward rendering path.</p></li>
<li><p>RTXGI lighting does not work with UE4’s other ray traced effects (for example, ray traced reflections).</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="artist-overview">
<h2>Artist Overview<a class="headerlink" href="#artist-overview" title="Permalink to this headline">¶</a></h2>
<p id="id2">RTXGI adds a high performance option to ray traced global illumination in UE4. As implied by the name, RTXGI requires ray tracing to be enabled and the plugin to be active.</p>
<p>If ray tracing is not available, the RTXGI plugin loads probe textures that were previously stored to disk from a platform that has ray tracing (i.e. DirectX 12).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When ray tracing is not available, for example in DirectX 11 or Vulkan RHIs, <code class="docutils literal notranslate"><span class="pre">DDGIVolumes</span></code> can be used but operate in a static mode where the probes do not update at runtime.</p>
</div>
<div class="section" id="rtxgi-volume-placement-in-ue4">
<h3>RTXGI Volume Placement in UE4<a class="headerlink" href="#rtxgi-volume-placement-in-ue4" title="Permalink to this headline">¶</a></h3>
<p>You can find the <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> actor under <strong>All Classes</strong> (shown below) and place it in a level.</p>
<p><img alt="volume-actor" src="../_images/volume-actor.png" /></p>
<p>All of UE4’s native transform gizmos (translation, rotation, and scale) can be used to fit the volume to your geometry.</p>
<p><img alt="transform-gizmos" src="../_images/transform-gizmos.png" /></p>
</div>
<div class="section" id="using-rtxgi-in-ue4">
<h3>Using RTXGI in UE4<a class="headerlink" href="#using-rtxgi-in-ue4" title="Permalink to this headline">¶</a></h3>
<p>Dynamic indirect lighting is generated inside the <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> with RTXGI. The <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> has many properties that can be tweaked (shown below), but the default values should work well for many situations.</p>
<p><img alt="volume-settings" src="../_images/settings.png" /></p>
<table class="colwidths-given docutils align-default" id="id4">
<caption><span class="caption-text">Basic <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> Properties</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Rays Per Probe</p></td>
<td><p>Sets the number of rays traced per probe. Higher numbers of rays traced per probe increases image quality by producing more stable indirect illumination, but will have a higher performance cost. <strong>In many cases, the default of 288 rays per probe works well</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p>Probe Counts</p></td>
<td><p>Sets the number of probes placed on each axis of a <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code>. High probe counts within a volume are usually not necessary. <strong>We recommend probe grids arranged with probes every 2-3 meters</strong>. Sparse probe grids often produce better visual results than dense probe grids, since dense probes grids localize the effect of each probe and can (at times) reveal the structure of the probe grid.  <strong>When in doubt, use the minimum number of probes necessary to get the desired result</strong>.</p></td>
</tr>
<tr class="row-even"><td><p>Lighting Priority</p></td>
<td><p>A value that allows for custom prioritization of volumes. If there are multiple volumes in the view frustum at the same time, the densest volume will be selected and used to apply indirect lighting to nearby surfaces. <strong>If you want to override this behavior, give the volume you want to use the lowest lighting priority value (and increase the lighting priority value of other volumes)</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p>Update Priority</p></td>
<td><p>A weighted round robin system is used to update volumes. <strong>Volumes with higher update priority values are updated more often</strong>. As a result, as more volumes are added to the scene, it will take longer for the system to update all volumes.</p></td>
</tr>
<tr class="row-even"><td><p>Probe Max Ray Distance</p></td>
<td><p>The maximum distance a probe ray can travel. No surfaces are hit past this distance. Reducing this value can increase performance in some scenarios.</p></td>
</tr>
<tr class="row-odd"><td><p>Probe Hysteresis</p></td>
<td><p>A value in the range [0,1] that affects the temporal accumulation of ray tracing results in probes. A value of 1 always uses the existing probe values and ignores the latest ray traced information. A value of 0 always uses the latest ray traced information and ignores all previous probe data. This property is best set to a value that balances the previous and latest ray traced data. <strong>The default value of 0.97 works well in most cases</strong>.</p></td>
</tr>
<tr class="row-even"><td><p>View and Normal Bias</p></td>
<td><p>Similar to shadow map biases, these properties help adjust for visibility artifacts. If you are seeing light or shadow leaking problems, adjust these bias values. <strong>In general, the view bias value should be 4x larger than the normal bias</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p>Volume Blend Distance</p></td>
<td><p>Specifies how the <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> blends at the edges of the volume, in world-space units. This is used to create faded areas at the edge of the volume and can be useful as an artistic control. For example, if you wanted vaulted ceilings at the top of a volume to have less light.</p></td>
</tr>
<tr class="row-even"><td><p>Volume Blend Distance Black</p></td>
<td><p>The distance from the edge of a volume at which it has zero weight (i.e. turns black or yields to an encompassing volume), in world-space units. Useful if you do not want a linear fade all the way to the edge.</p></td>
</tr>
<tr class="row-odd"><td><p>Enable Probe Relocation</p></td>
<td><p>Adjusts the position of probes every frame based on the surrounding world geometry. Probes are moved to locations that result in better lighting, instead of (for example) being positioned inside of walls or other objects.</p></td>
</tr>
<tr class="row-even"><td><p>Enable Probe Scrolling</p></td>
<td><p>Turns the volume into an <strong>Infinite Scrolling Volume</strong>. The volume becomes world axis-aligned and when the volume moves the probes on the outer-most edges of the volume are repositioned to the opposite end of the volume in the direction of movement (“scrolling” the volume like tank tread). With this approach, the majority of probes retain their position in world-space making for more temporally stable lighting results when the volume moves.</p></td>
</tr>
<tr class="row-odd"><td><p>Enable Volume</p></td>
<td><p>Manually enables or disables the volume.</p></td>
</tr>
<tr class="row-even"><td><p>Runtime Static</p></td>
<td><p><strong>Volumes marked as runtime static will store indirect lighting in probes at author-time and will not be updated dynamically during gameplay</strong>. This can be used to decrease performance costs. For example, place a large static volume in the level with very sparse probes and mark it as runtime static to fill the scene with indirect lighting computed while in-editor. Then use smaller, denser DDGIVolumes for dynamic indirect lighting in places of interest at runtime.</p></td>
</tr>
<tr class="row-odd"><td><p>Skylight</p></td>
<td><p>When selected, the sky light contributes to lighting computed by the <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code>. Note that the sky light does not use ray tracing to determine occlusion, so enabling this may inject lighting into areas that do not actually recieve it.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-center">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DDGIVolume Actor Advanced Properties</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img alt="volume-settings-advanced" src="../_images/settings-advanced.png" /></p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id5">
<caption><span class="caption-text">Advanced <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> Properties</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Probe Distance Exponent</p></td>
<td><p>An exponent used during visibility testing. A high value rapidly reacts to depth discontinuities but may cause banding.</p></td>
</tr>
<tr class="row-odd"><td><p>Probe Irradiance Encoding Gamma</p></td>
<td><p>An exponent that perceptually encodes irradiance for faster light-to-dark convergence.</p></td>
</tr>
<tr class="row-even"><td><p>Probe Change Threshold</p></td>
<td><p>A ratio used during probe radiance blending. Specifies a threshold to identify when large lighting changes occur. When the difference in the maximum color components between the previous and current irradiance is larger than this threshold, the hysteresis will be reduced.</p></td>
</tr>
<tr class="row-odd"><td><p>Probe Brightness Threshold</p></td>
<td><p>A threshold value used during probe radiance blending that determines the maximum allowed difference in brightness between the previous and current irradiance values. This prevents impulses from drastically changing a texel’s irradiance in a single update cycle.</p></td>
</tr>
<tr class="row-even"><td><p>Probe Min Frontface Distance</p></td>
<td><p>The minimum distance allowed to a front facing triangle before Probe Relocation moves the probe.</p></td>
</tr>
<tr class="row-odd"><td><p>Probe Backface Theshold</p></td>
<td><p>The ratio of rays cast for a probe that may hit back facing triangles before Probe Relocation and State Classification assume the probes is inside of geometry.</p></td>
</tr>
<tr class="row-even"><td><p>Light Multiplier</p></td>
<td><p>Use this setting to artificially increase or decrease the GI lighting contribution from this volume.</p></td>
</tr>
<tr class="row-odd"><td><p>Emissive Multiplier</p></td>
<td><p>Use this setting to artificially increase or decrease how much emissive contributes to the GI in this volume.</p></td>
</tr>
<tr class="row-even"><td><p>Irradiance Scalar</p></td>
<td><p>A [0,1] value that is used to scale lighting magnitudes before storage when using 10-bit irradiance texture formats. Scaled values are reconstituted after reading, allowing for larger irradiance values to be stored in 10-bit texture formats. This saves memory at the cost of some precision.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tips-and-tricks">
<h3>Tips and Tricks<a class="headerlink" href="#tips-and-tricks" title="Permalink to this headline">¶</a></h3>
<div class="section" id="sparse-probe-layouts-recommended">
<h4>Sparse Probe Layouts Recommended<a class="headerlink" href="#sparse-probe-layouts-recommended" title="Permalink to this headline">¶</a></h4>
<p>Relatively sparse probe grids are good practice for both high performance and quality results. As a starting point, we recommend setting probes about 2-3 meters apart from each other in a typical human-scale indoor scene. In large outdoor scenes, you can go much sparser and still get good results!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By design, RTXGI does <strong>not</strong> generate high frequency detail. Increasing probe density can help to an extent, but it won’t produce precise or sharp lighting and shadow at any density. For high frequency details, use other forms of lighting such as point lighting with shadows or screen-space global illumination (SSGI).</p>
</div>
<p>You can have multiple <code class="docutils literal notranslate"><span class="pre">DDGIVolumes</span></code> with varying probe densities. The system will always make use of the probes in the denser volume. You might do this if you need a more precision in a specific area. It may not take an expensive volume to achieve more precise sampling. The volume on the bottom right is a 5x5x5 <code class="docutils literal notranslate"><span class="pre">DDGIVolume</span></code> set to the default 288 rays per probe. A volume like this is relatively inexpensive and can help achieve the result you want!</p>
<table class="colwidths-given docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Recommended probe density</p></th>
<th class="head"><p>A higher density “detail” volume</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img alt="probe" src="../_images/probes.png" /></p></td>
<td><p><img alt="sub-volume" src="../_images/probe-density.png" /></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="emissive-surfaces-are-light-sources-with-rtxgi">
<h4>Emissive Surfaces are Light Sources with RTXGI<a class="headerlink" href="#emissive-surfaces-are-light-sources-with-rtxgi" title="Permalink to this headline">¶</a></h4>
<p>In this example of the NVIDIA Attic scene, there are large emissive meshes outside the windows to generate extra indirect light.</p>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="../_images/emissive-surfaces.png"><img alt="../_images/emissive-surfaces.png" src="../_images/emissive-surfaces.png" style="width: 1205.0px; height: 744.0px;" /></a>
<p class="caption"><span class="caption-text">Emissive meshes added outside the NVIDIA Attic to add indirect lighting.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p><em>Any emissive surface can be a light source with RTXGI</em>. The larger and more physically available the light emissive mesh is to RTXGI probes, the greater the lighting contribution. Emissive surface values can also be turned up to generate more light. With this approach, you might find it’s better to switch from 10-bit irradiance to 32-bit irradiance, since this provides a more detailed range of light contributions. <strong>32-bit irradiance should be used with caution</strong> though, since it increases the memory cost 3x. Only enable 32-bit irradiance when absolutely necessary!</p>
<p>With RTXGI, it is now possible to light a scene with fewer point lights, spot lights, and/or area lights. Instead, you can rely on a combination of a few lights and emissive surfaces. This change will not only improve workflow and iteration time, but it can improve performance (due to fewer lights). You may find it’s better to take on the small fixed cost of RTXGI instead of using many shadow casting lights. <strong>Lighting a scene in this way is a different approach, but may produce a result that runs faster and is easier to create</strong>.</p>
<p><strong>Here’s a practical example:</strong> <br/>
Emissive meshes generate extra light without being a visible part of the scene. In UE4, the emissive meshes can be marked as <em>only visible to ray tracing</em>. You can create “hidden” emissive meshes to generate extra global illumination in areas where the visible mesh is too small to contribute on its own. To do this, make use of the <code class="docutils literal notranslate"><span class="pre">RayTracingQualitySwitch</span></code> node.</p>
<table class="colwidths-given docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Indirect lighting from hidden emissive meshes</p></th>
<th class="head"><p>Hidden emissive meshes visualized</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img alt="emissive" src="../_images/emissive-surfaces2.png" /></p></td>
<td><p><img alt="emissive2" src="../_images/green-lights.png" /></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="make-sure-rtxgi-is-contributing-light-where-you-want">
<h4>Make sure RTXGI is contributing light where you want<a class="headerlink" href="#make-sure-rtxgi-is-contributing-light-where-you-want" title="Permalink to this headline">¶</a></h4>
<p>RTXGI doesn’t automatically make every surface brighter. It can require some fine tuning and the final result is a combination of your materials, overall lighting, postprocess settings, and other choices. A handy way to start developing your baseline for the global illumination contribution is to look at your scene in <code class="docutils literal notranslate"><span class="pre">Lightingonly</span></code> mode. <code class="docutils literal notranslate"><span class="pre">Lightingonly</span></code> is useful in this case because it displays all surfaces with a flat 50% gray color. When turning RTXGI on and off, you’ll get a clear understanding of the true global illumination contribution being made by various lighting sources.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Even though the surfaces display as 50% gray, they still contribute color lighting and bounce, so you are getting a good look at what the lighting is doing.</p>
</div>
<table class="colwidths-given docutils align-center">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Lightingonly mode, with direct lighting only</p></th>
<th class="head"><p>Lightingonly mode, with direct lighting and RTXGI</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img alt="direct" src="../_images/direct-only.png" /></p></td>
<td><p><img alt="indirect" src="../_images/direct+rtxgi.png" /></p></td>
</tr>
</tbody>
</table>
<p>As you can imagine, dark surfaces don’t reflect light well (very dark surfaces don’t reflect light at all!). If your textures are dark (typically below the 50% brightness threshold), they will have less bounce light and a smaller global illumination contribution. This is not necessarily a bad result. If objects are meant to be very dark then the lighting is as intended and still physically based. Brighter surfaces will contribute more obvious bounce light (since they reflect it). Think of the visual look of a game like Mirror’s Edge - with it’s very bright and colorful surfaces and how much indirect bounce lighting it shows off.</p>
<p><strong>The Ultimate Tip:</strong> <br/>
Think about your surfaces and how they relate to global lighting. If your goal is to make sure you have a lot of indirect light in your scene, even small value changes can have an impact on the final indirect lighting result. It may not take much of a shift in some cases to get the result you want.</p>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="../_images/direct+rtxgi+texture.png"><img alt="../_images/direct+rtxgi+texture.png" src="../_images/direct+rtxgi+texture.png" style="width: 1167.0px; height: 716.0px;" /></a>
<p class="caption"><span class="caption-text">Caption</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="DDGI.html" class="btn btn-neutral float-left" title="Dynamic Diffuse Global Illumination" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019-2021, NVIDIA.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>